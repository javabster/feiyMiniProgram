{
  "_args": [
    [
      {
        "raw": "leancloud-realtime@^4.0.0-beta.5",
        "scope": null,
        "escapedName": "leancloud-realtime",
        "name": "leancloud-realtime",
        "rawSpec": "^4.0.0-beta.5",
        "spec": ">=4.0.0-beta.5 <5.0.0",
        "type": "range"
      },
      "/Users/abbymitchell/feiyMiniProgram/node_modules/leancloud-storage"
    ]
  ],
  "_from": "leancloud-realtime@>=4.0.0-beta.5 <5.0.0",
  "_id": "leancloud-realtime@4.0.0-beta.5",
  "_inCache": true,
  "_location": "/leancloud-realtime",
  "_nodeVersion": "9.11.1",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/leancloud-realtime_4.0.0-beta.5_1523772765269_0.4208893753361076"
  },
  "_npmUser": {
    "name": "leeyeh",
    "email": "lee55962698@gmail.com"
  },
  "_npmVersion": "5.6.0",
  "_phantomChildren": {},
  "_requested": {
    "raw": "leancloud-realtime@^4.0.0-beta.5",
    "scope": null,
    "escapedName": "leancloud-realtime",
    "name": "leancloud-realtime",
    "rawSpec": "^4.0.0-beta.5",
    "spec": ">=4.0.0-beta.5 <5.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/leancloud-storage"
  ],
  "_resolved": "https://registry.npmjs.org/leancloud-realtime/-/leancloud-realtime-4.0.0-beta.5.tgz",
  "_shasum": "cdb69c3e841619b72c5052bfdb3006e6931122dd",
  "_shrinkwrap": null,
  "_spec": "leancloud-realtime@^4.0.0-beta.5",
  "_where": "/Users/abbymitchell/feiyMiniProgram/node_modules/leancloud-storage",
  "browser": {
    "ws": "./src/polyfills/ws-browser.js",
    "./dist/realtime.js": "./dist/realtime.browser.js",
    "./dist/realtime-core.js": "./dist/realtime-core.browser.js"
  },
  "bugs": {
    "url": "https://github.com/leancloud/js-realtime-sdk/issues"
  },
  "commitlint": {
    "extends": [
      "@commitlint/config-angular"
    ]
  },
  "dependencies": {
    "axios": "^0.18.0",
    "babel-runtime": "^6.6.1",
    "base64-arraybuffer": "^0.1.5",
    "debug": "^3.0.0",
    "eventemitter3": "^3.0.0",
    "javascript-state-machine": "^2.3.5",
    "lodash": "^4.6.0",
    "protobufjs": "^5.0.1",
    "uuid": "^3.0.0",
    "ws": "^4.0.0"
  },
  "description": "LeanCloud Realtime Message JavaScript SDK",
  "devDependencies": {
    "@commitlint/cli": "^6.0.2",
    "@commitlint/config-angular": "^6.0.2",
    "@leeyeh/jsdoc-rtd": "^1.0.13",
    "@leeyeh/rollup-plugin-node-resolve": "^3.0.0",
    "babel-eslint": "^8.0.0",
    "babel-plugin-external-helpers": "^6.8.0",
    "babel-plugin-istanbul": "^4.1.1",
    "babel-plugin-transform-decorators-legacy": "^1.3.4",
    "babel-plugin-transform-es2015-classes": "^6.5.2",
    "babel-plugin-transform-object-rest-spread": "^6.8.0",
    "babel-plugin-transform-runtime": "^6.6.0",
    "babel-preset-env": "^1.4.0",
    "babel-register": "^6.14.0",
    "conventional-changelog-cli": "^1.1.1",
    "eslint": "^4.3.0",
    "eslint-config-airbnb-base": "^12.0.0",
    "eslint-config-prettier": "^2.9.0",
    "eslint-plugin-import": "^2.0.0",
    "espree": "^3.1.4",
    "husky": "^0.14.3",
    "inherit": "^2.2.3",
    "jsdoc": "github:leeyeh/jsdoc#v3.4.0",
    "jsdoc-ignore-future": "^1.1.0",
    "karma": "^2.0.0",
    "karma-chrome-launcher": "^2.2.0",
    "karma-mocha": "^1.3.0",
    "karma-sauce-launcher": "^1.2.0",
    "leancloud-storage": "^3.0.0",
    "mocha": "^5.0.0",
    "nyc": "^11.2.1",
    "prettier": "^1.11.1",
    "pretty-quick": "^1.4.1",
    "rollup": "^0.56.4",
    "rollup-plugin-babel": "^3.0.2",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.0.0",
    "rollup-plugin-replace": "^2.0.0",
    "rollup-plugin-uglify": "^3.0.0",
    "should": "^12.0.0",
    "should-sinon": "0.0.5",
    "sinon": "^4.2.1",
    "typescript": "^2.4.1",
    "weapp-polyfill": "^3.1.1"
  },
  "directories": {
    "test": "test"
  },
  "dist": {
    "integrity": "sha512-SMfxjexc7d36AChg//XRS+uVdY9C/Id3NaXW8yQSdlQGLR07EwiDvD8Vns/aER4Kvsx8kWYtQ0tOmo3LZkOhDA==",
    "shasum": "cdb69c3e841619b72c5052bfdb3006e6931122dd",
    "tarball": "https://registry.npmjs.org/leancloud-realtime/-/leancloud-realtime-4.0.0-beta.5.tgz",
    "fileCount": 76,
    "unpackedSize": 12720003,
    "npm-signature": "-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJa0u1eCRA9TVsSAnZWagAAXPAP+gJC9pzP/dMbxUTQC3CK\nfigYT6iQSmTMZwp4P1Vv7giiJnSNHcceD0/ICjZtYP5LkLZnHGwbV9E9XYLL\nzXXkjqCfqjcYgM/h/ZeShPkRuob5UPiCmImbffQrbzBXnLHKZ0vvNypThdVE\n/jS6jGuj7As3fVISs4GdvvTDAMyRXrbIMJNEdclvBeFHQ+rB3Pf00qDsdJkH\nU5JN0K8Gy38LbSwdaRvHMA9i1jADGg3yo7YEHbSwrrd+IMqpr83T+wjoDFnS\nvz/2LxBPi0tikN9PO4Y1l60Lx/xUpK9iEOi+R9aljt3e/3hB2rUsDj2yfK5H\n2kvZDVq7toMdFeDwpvwiVY72xnKc+jZmuvb7TXHSgOuGpPldGTh5zg2F7reg\ntoIo7fTvrXR/vWiQ+eqPgi4z8suIFsznCycjkFOilyR1yhDzXS0LDwJeuOnG\nX+p6g9utpbUDkhhxruLJ3V2Rqcqu1wQ/qp45GCOtwC53WAM+J23qhAzYEgG2\nJ62fYy7ugXhB7wjAXXhMupCmzG7zs2ygzXWMwBCbnHp7sc4ls2tY9ovf6EEu\nPyXtMRwmXzk2L33OL7/jOM7GMLTm/o2lIUQsY+jNuBX7ZOsYO3nMGpJj//AJ\nSvqri3t9CCVTzeRFHBywn5yhcNtTbyWYS3L+A5CA2m8/U7WdAqlPQzkKpSx+\nu88c\r\n=lJ+S\r\n-----END PGP SIGNATURE-----\r\n"
  },
  "gitHead": "7733c6d7608f78724d9cedc83efe446008648d67",
  "homepage": "https://leancloud.cn/",
  "jsnext:main": "./src/index.js",
  "keywords": [
    "leancloud",
    "realtime",
    "message"
  ],
  "license": "MIT",
  "main": "./dist/realtime.js",
  "maintainers": [
    {
      "name": "avos",
      "email": "xzhuang@avos.com"
    },
    {
      "name": "hjiang",
      "email": "j@1byte.io"
    },
    {
      "name": "jysperm",
      "email": "jysperm@gmail.com"
    },
    {
      "name": "leeyeh",
      "email": "lee55962698@gmail.com"
    }
  ],
  "name": "leancloud-realtime",
  "nyc": {
    "require": [
      "babel-register"
    ],
    "include": [
      "src/**",
      "plugins/typed-messages/src/**"
    ],
    "reporter": [
      "lcov",
      "text"
    ],
    "sourceMap": false,
    "instrument": false
  },
  "optionalDependencies": {},
  "prettier": {
    "singleQuote": true,
    "trailingComma": "es5"
  },
  "readme": "# LeanCloud JavaScript Realtime SDK\n\n[![npm](https://img.shields.io/npm/v/leancloud-realtime.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime)\n[![npm](https://img.shields.io/npm/v/leancloud-realtime/next.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime)\n![gzip size](http://img.badgesize.io/leancloud/js-realtime-sdk/dist/dist/realtime.browser.min.js.svg?compression=gzip&style=flat-square)\n[![Build Status](https://img.shields.io/travis/leancloud/js-realtime-sdk.svg?style=flat-square)](https://travis-ci.org/leancloud/js-realtime-sdk)\n[![Codecov](https://img.shields.io/codecov/c/github/leancloud/js-realtime-sdk.svg?style=flat-square)](https://codecov.io/github/leancloud/js-realtime-sdk)\n[![Known Vulnerabilities](https://snyk.io/test/github/leancloud/js-realtime-sdk/badge.svg?style=flat-square)](https://snyk.io/test/github/leancloud/js-realtime-sdk)\n\n为您的 JavaScript App 接入 LeanCloud 实时通讯服务。\n\n## 版本说明\n\n遵循 [语义化版本](http://semver.org/lang/zh-CN/)。\n\n安装稳定版本：\n\n```\nnpm install leancloud-realtime --save\n```\n\n安装测试版本：\n\n```\nnpm install leancloud-realtime@next --save\n```\n\n安装指定版本：\n\n```\n// 安装 v3 版本\nnpm install leancloud-realtime@3 --save\n```\n\n## 支持的运行环境\n\n* 浏览器 / WebView\n  * IE 10+\n  * Edge latest\n  * Chrome 45+\n  * Firefox latest\n  * iOS 9.3+\n  * Android 4.4+\n* Node.js 4.0+\n* 微信小程序/小游戏 latest\n* React Native 0.26+\n* Electron latest\n\n## 文档\n\n* [安装文档](https://leancloud.cn/docs/sdk_setup-js.html)\n* [使用文档](https://leancloud.cn/docs/realtime_guide-js.html)\n* [API 文档](https://leancloud.github.io/js-realtime-sdk/docs/)\n\n## Demo\n\n* [Simple Chatroom](https://leancloud.github.io/js-realtime-sdk/demo/simple-chatroom/) ([src](https://github.com/leancloud/js-realtime-sdk/tree/master/demo/simple-chatroom))\n* [LeanMessage](https://leancloud.github.io/leanmessage-demo) ([src](https://github.com/leancloud/leanmessage-demo))\n* [WebRTC 视频通话](https://leancloud.github.io/js-realtime-sdk/demo/webrtc/) ([src](https://github.com/leancloud/js-realtime-sdk/tree/master/demo/webrtc))\n\n## 插件\n\n| package name                                 | 描述          |                                                                                         版本                                                                                          |                                           文档                                           |\n| :------------------------------------------- | :------------ | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------: |\n| leancloud-realtime-plugin-typed-messages     | 富媒体消息    |     [![npm](https://img.shields.io/npm/v/leancloud-realtime-plugin-typed-messages.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime-plugin-typed-messages)     |   [API docs](https://leancloud.github.io/js-realtime-sdk/plugins/typed-messages/docs/)   |\n| leancloud-realtime-plugin-groupchat-receipts | 群聊已读回执  | [![npm](https://img.shields.io/npm/v/leancloud-realtime-plugin-groupchat-receipts.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime-plugin-groupchat-receipts) | [API docs](https://leancloud.github.io/js-realtime-sdk/plugins/groupchat-receipts/docs/) |\n| leancloud-realtime-plugin-webrtc             | WebRTC 客户端 |             [![npm](https://img.shields.io/npm/v/leancloud-realtime-plugin-webrtc.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime-plugin-webrtc)             |       [API docs](https://leancloud.github.io/js-realtime-sdk/plugins/webrtc/docs/)       |\n\n## 支持\n\n* 在使用过程中遇到了问题时\n  * 如果你是商用版用户，请新建一个工单。\n  * 也可以在 [论坛](https://forum.leancloud.cn/) 提问、讨论。\n\n## 贡献\n\n如果你希望为这个项目贡献代码，请按以下步骤进行：\n\n0.  Fork 这个项目，clone 到本地\n1.  在目录中执行 `npm install` 安装所需 Node.js 依赖包\n1.  编码，更新测试用例\n1.  运行 `npm test` 确保测试全部 pass\n1.  提交改动，请遵循 [conversational commit message 风格](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)\n1.  发起 Pull Request 至 master 分支\n\n### 项目的目录结构\n\n```\n.\n├── demo\n├── deploy.sh                 // 部署 gh-pages 分支\n├── release.sh                // 部署 dist 分支\n├── dist                      // 打包产出 (dist 分支)\n│   ├── realtime.browser.js     // 浏览器用\n│   ├── realtime.browser.min.js // 浏览器用(uglified)\n│   ├── realtime.weapp.js       // 微信小程序用\n│   └── realtime.js             // node 用\n├── proto\n│   ├── message-compiled.js     // 使用 pbjs 生成的 message 类\n│   ├── message.js              // ES6 wrapper\n│   └── message.proto           // proto 原始文件\n├── src                       // 源码\n│   └── index.js                // 打包入口\n├── test                      // 测试用例\n│   ├── browser                 // 浏览器测试入口\n│   └── index.js                // 测试入口\n└── plugins\n    ├── typed-messages          // leancloud-realtime-plugin-typed-messages package\n    └── webrtc                  // leancloud-realtime-plugin-webrtc package\n```\n\n### Architecture\n\nSDK 分为连接层与应用层两部分，只存在应用层对连接层公开 API 的调用，连接层对开发者不可见。\n\n#### 连接层\n\n* `WebSocketPlus`：封装了 WebSocket。相比 w3 WebSocket，增加了以下特性：\n  * 是一个有限状态机\n  * 实现了 [Node.js EventEmitter 接口](https://nodejs.org/api/events.html)\n  * 超时与自动重连机制\n  * url 参数支持 Promise 及备用地址\n* `Connection`：继承自 `WebSocketPlus`，增加了与业务相关的功能：\n  * 根据 subprotocol 自动处理发送与接收的消息，应用层发送接收的均是 ProtoBuf Message 类\n  * `send` 接口返回 Promise，在 server 回复后才算 send 成功\n  * 实现了应用层 ping/pong\n\n#### 应用层\n\n* `Realtime`：开发者使用 SDK 的入口，负责访问 router、创建 connection、创建与管理 clients、创建 messageParser（管理消息类型）、监听 connection 的消息并 dispatch 给对应的 client\n* `Client`：所有的 clients 共享一个 connection\n  * `IMClient`：对应即时通讯中的「用户」，持有 connection 与 conversations，负责创建管理将收到的消息处理后在对应 conversation 上派发，所有的 IMClients 共享一个 messageParser\n* `MessageParser` 消息解析器，负责将一个 JSON 格式的消息 parse 为对应的 Message 类\n* `Conversation`：实现对话相关的操作\n  * `ConversationQuery`：对话查询器\n* `Messages`\n  * `AVMessage`：接口描述，生成文档用\n  * `Message`：消息基类\n  * `TypedMessage`：类型消息基类，继承自 `Message`\n  * `TextMessage`：文本消息，继承自 `TypedMessage`\n  * 其他富媒体消息类（`FileMessage` 及其子类、`LocationMessage`）由于依赖 leancloud-storage，作为另一个独立 package 发布\n\n### 开启调试模式\n\n#### Node.js\n\n```bash\nexport DEBUG=LC*\n```\n\n#### 浏览器\n\n```javascript\nlocalStorage.setItem('debug', 'LC*');\n```\n\n## Develop Workflow\n\n### 本地开发\n\n更新 .proto 后请运行\n\n```\nnpm run convert-pb\n```\n\n测试\n\n```\nnpm run test:node -- --grep KEYWORDS\n```\n\n浏览器测试\n\n```\nnpm run test:browser-local\n```\n\n生成 dist/realtime.\\*\n\n```\nnpm run build\n```\n\n### 持续集成\n\n合并 PR 到 master 分支后持续集成会自动运行 `npm build` 与 `npm run docs`，然后将 dist 目录推送到 dist 分支，将文档与 demo 推送到 gh-pages。\n\n## Release Process Workflow\n\n0.  遵循 semver 提升 `package.json` 中的版本号\n1.  `npm run changelog` 生成新的 `changelog.md`，润色之\n1.  Commit `package.json`，`changelog.md`\n1.  Push to remote `master` branch\n1.  等待持续集成 pass\n1.  使用 GitHub 基于 dist 分支生成 pre-release 包（for bower）\n1.  Fetch and checkout remote `dist` branch 并确认该提交的内容是即将发布的版本\n1.  npm publish（`npm publish`，需 npm 协作者身份），如果是 pre-release 版本需要带 next tag\n1.  如有更新，在 npm 上发布各个 plugin\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/leancloud/js-realtime-sdk.git"
  },
  "scripts": {
    "build": "npm run build:realtime && npm run build:plugins && ./script/validate-es5.js",
    "build:plugins": "rollup -c rollup/rollup.config.plugins.js",
    "build:realtime": "rollup -c rollup/rollup.config.realtime.js",
    "build:test": "rollup -c rollup/rollup.config.test.js",
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s",
    "commitmsg": "commitlint -e $GIT_PARAMS",
    "convert-pb": "pbjs proto/message.proto -t commonjs > proto/message-compiled.js && sed -i '' 's/protobufjs/protobufjs\\/dist\\/protobuf-light/g' ./proto/message-compiled.js",
    "docs": "jsdoc src README.md package.json -d docs -c .jsdocrc.json && jsdoc plugins/typed-messages/src plugins/typed-messages/package.json src/messages/message.js src/messages/typed-message.js -d plugins/typed-messages/docs -c .jsdocrc.json && jsdoc plugins/webrtc/src plugins/webrtc/package.json -d plugins/webrtc/docs -c .jsdocrc.json && jsdoc plugins/groupchat-receipts/src plugins/groupchat-receipts/package.json -d plugins/groupchat-receipts/docs -c .jsdocrc.json",
    "lint": "eslint --ignore-path .gitignore src test plugins && tsc realtime.d.ts",
    "precommit": "pretty-quick --staged",
    "test": "npm run lint && npm run build && npm run docs && npm run test:node && npm run test:browser",
    "test:browser": "if [ ! -z \"$SAUCE_ACCESS_KEY\" ]; then npm run build:test && karma start karma-sauce.conf.js; else echo 'Saucelabs test skipped, set SAUCE_USERNAME and SAUCE_ACCESS_KEY to start it.\n\rTo run browser tests locally, run `npm run test:browser-local`'; fi",
    "test:browser-local": "npm run build:test && karma start",
    "test:node": "NODE_ENV=test nyc mocha --timeout 30000 test/index.js plugins/**/test/index.js --exit"
  },
  "types": "./realtime.d.ts",
  "typings": "./realtime.d.ts",
  "version": "4.0.0-beta.5",
  "weapp": {
    "ws": "weapp-polyfill/websocket.js",
    "./src/polyfills/polyfills.js": "./src/polyfills/polyfills-weapp.js",
    "./dist/realtime.js": "./dist/realtime.weapp.js",
    "./dist/realtime-core.js": "./dist/realtime-core.weapp.js"
  }
}
